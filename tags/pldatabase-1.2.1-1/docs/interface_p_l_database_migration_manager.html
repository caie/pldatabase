<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PlausibleDatabase: PLDatabaseMigrationManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PLDatabaseMigrationManager Class Reference</h1><!-- doxytag: class="PLDatabaseMigrationManager" -->
<p>The <a class="el" href="interface_p_l_database_migration_manager.html" title="The PLDatabaseMigrationManager implements transactional, versioned migration/initialization...">PLDatabaseMigrationManager</a> implements transactional, versioned migration/initialization of database schema and data.  
<a href="#_details">More...</a></p>

<p><a href="class_p_l_database_migration_manager-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_p_l_database_migration_manager.html#a593f76ba05ed7a4ef0ea1aaf492f9d2d">initWithConnectionProvider:transactionManager:versionManager:delegate:</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Manages database migration and initialization.  <a href="#a593f76ba05ed7a4ef0ea1aaf492f9d2d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_p_l_database_migration_manager.html#ad6ffb000f1de84e36649e8bf3e67649b">migrateAndReturnError:</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open a new database connection and allow the <a class="el" href="protocol_p_l_database_migration_delegate-p.html" title="The PLDatabaseMigrationDelegate is responsible for applying any migration necessary...">PLDatabaseMigrationDelegate</a> to perform any pending migrations.  <a href="#ad6ffb000f1de84e36649e8bf3e67649b"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The <a class="el" href="interface_p_l_database_migration_manager.html" title="The PLDatabaseMigrationManager implements transactional, versioned migration/initialization...">PLDatabaseMigrationManager</a> implements transactional, versioned migration/initialization of database schema and data. </p>
<p>Arbitrary migrations may be supplied via a <a class="el" href="protocol_p_l_database_migration_delegate-p.html" title="The PLDatabaseMigrationDelegate is responsible for applying any migration necessary...">PLDatabaseMigrationDelegate</a>. The database versioning meta-data is maintained by a supplied <a class="el" href="protocol_p_l_database_migration_version_manager-p.html" title="Manages the database migration version.">PLDatabaseMigrationVersionManager</a>. This class makes no assumptions about the migrations applied or the methods used to retrieve or update database schema versions.</p>
<dl class="user"><dt><b>Thread Safety</b></dt><dd><a class="el" href="interface_p_l_database_migration_manager.html" title="The PLDatabaseMigrationManager implements transactional, versioned migration/initialization...">PLDatabaseMigrationManager</a> instances are not required to implement any locking and must not be shared between threads. </dd></dl>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a593f76ba05ed7a4ef0ea1aaf492f9d2d"></a><!-- doxytag: member="PLDatabaseMigrationManager::initWithConnectionProvider:transactionManager:versionManager:delegate:" ref="a593f76ba05ed7a4ef0ea1aaf492f9d2d" args="(id&lt; PLDatabaseConnectionProvider &gt; connectionProvider,[transactionManager] id&lt; PLDatabaseMigrationTransactionManager &gt; lockManager,[versionManager] id&lt; PLDatabaseMigrationVersionManager &gt; versionManager,[delegate] id&lt; PLDatabaseMigrationDelegate &gt; delegate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initWithConnectionProvider: </td>
          <td></td>
          <td class="paramtype">(id&lt;<a class="el" href="protocol_p_l_database_connection_provider-p.html">PLDatabaseConnectionProvider</a>&gt;)&nbsp;</td>
          <td class="paramname"> <em>connectionProvider</em></td>
        </tr>
        <tr>
          <td class="paramkey">transactionManager:</td>
          <td></td>
          <td class="paramtype">(id&lt;<a class="el" href="protocol_p_l_database_migration_transaction_manager-p.html">PLDatabaseMigrationTransactionManager</a>&gt;)&nbsp;</td>
          <td class="paramname"> <em>lockManager</em></td>
        </tr>
        <tr>
          <td class="paramkey">versionManager:</td>
          <td></td>
          <td class="paramtype">(id&lt;<a class="el" href="protocol_p_l_database_migration_version_manager-p.html">PLDatabaseMigrationVersionManager</a>&gt;)&nbsp;</td>
          <td class="paramname"> <em>versionManager</em></td>
        </tr>
        <tr>
          <td class="paramkey">delegate:</td>
          <td></td>
          <td class="paramtype">(id&lt;<a class="el" href="protocol_p_l_database_migration_delegate-p.html">PLDatabaseMigrationDelegate</a>&gt;)&nbsp;</td>
          <td class="paramname"> <em>delegate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Manages database migration and initialization. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connectionProvider</em>&nbsp;</td><td>Database conection provider. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lockManager</em>&nbsp;</td><td>An object implementing the <a class="el" href="protocol_p_l_database_migration_transaction_manager-p.html" title="Manages the database migration transactions and locking to ensure atomic testing...">PLDatabaseMigrationTransactionManager</a> protocol. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>versionManager</em>&nbsp;</td><td>An object implementing the <a class="el" href="protocol_p_l_database_migration_version_manager-p.html" title="Manages the database migration version.">PLDatabaseMigrationVersionManager</a> protocol. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>delegate</em>&nbsp;</td><td>An object implementing the formal <a class="el" href="protocol_p_l_database_migration_delegate-p.html" title="The PLDatabaseMigrationDelegate is responsible for applying any migration necessary...">PLDatabaseMigrationDelegate</a> protocol. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad6ffb000f1de84e36649e8bf3e67649b"></a><!-- doxytag: member="PLDatabaseMigrationManager::migrateAndReturnError:" ref="ad6ffb000f1de84e36649e8bf3e67649b" args="(NSError **outError)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) migrateAndReturnError: </td>
          <td></td>
          <td class="paramtype">(NSError **)&nbsp;</td>
          <td class="paramname"> <em>outError</em></td>
          <td>&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Open a new database connection and allow the <a class="el" href="protocol_p_l_database_migration_delegate-p.html" title="The PLDatabaseMigrationDelegate is responsible for applying any migration necessary...">PLDatabaseMigrationDelegate</a> to perform any pending migrations. </p>
<p>If the migration delegate returns success (YES), the <a class="el" href="protocol_p_l_database_migration_version_manager-p.html" title="Manages the database migration version.">PLDatabaseMigrationVersionManager</a> will be used to set the provided version number.</p>
<p>If the delegate returns failure (NO), the database will not be modified in any way (including the addition of a database version number).</p>
<p>A transaction will be opened prior to the delegate being called. The transaction will be committed upon the return of a success value (YES). If this method returns NO, the entire transaction will be aborted.</p>
<p>Failure to open the database, or returning NO from the delegate, will cause database initialization to fail, and this method will return NO.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>outError</em>&nbsp;</td><td>A pointer to an NSError object variable. If an error occurs, this pointer will contain an error object indicating why the migration could not be completed. If no error occurs, this parameter will be left unmodified. You may specify NULL for this parameter, and no error information will be provided. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>YES on successful migration, or NO if migration failed. If NO is returned, all modifications will be rolled back. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Classes/<a class="el" href="_p_l_database_migration_manager_8h_source.html">PLDatabaseMigrationManager.h</a></li>
<li>Classes/PLDatabaseMigrationManager.m</li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Jun 10 11:55:08 2010 for PlausibleDatabase by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
