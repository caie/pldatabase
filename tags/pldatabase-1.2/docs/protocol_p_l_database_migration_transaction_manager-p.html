<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>PlausibleDatabase: &lt; PLDatabaseMigrationTransactionManager &gt; Protocol Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>&lt; PLDatabaseMigrationTransactionManager &gt; Protocol Reference</h1><!-- doxytag: class="PLDatabaseMigrationTransactionManager-p" -->Manages the database migration transactions and locking to ensure atomic testing of the database version and application of any migrations.  
<a href="#_details">More...</a>
<p>
<code>#import &lt;<a class="el" href="_p_l_database_migration_transaction_manager_8h_source.html">PLDatabaseMigrationTransactionManager.h</a>&gt;</code>
<p>
<div class="dynheader">
Inheritance diagram for &lt; PLDatabaseMigrationTransactionManager &gt;:</div>
<div class="dynsection">
<p><center><img src="protocol_p_l_database_migration_transaction_manager-p__inherit__graph.png" border="0" usemap="#_3_01_p_l_database_migration_transaction_manager_01_4__inherit__map" alt="Inheritance graph"></center>
<map name="_3_01_p_l_database_migration_transaction_manager_01_4__inherit__map">
<area shape="rect" id="node3" href="interface_p_l_sqlite_migration_version_manager.html" title="Implements database schema versioning using SQLite&#39;s per&#45;database user_version..." alt="" coords="49,83,292,112"></map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="protocol_p_l_database_migration_transaction_manager-p-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_p_l_database_migration_transaction_manager-p.html#c542aa6d966e309671cc0a614f4b57b7">beginExclusiveTransactionForDatabase:error:</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start a database transaction, using a sufficient isolation level and/or locking to ensure that no other migrations will run until this has completed.  <a href="#c542aa6d966e309671cc0a614f4b57b7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_p_l_database_migration_transaction_manager-p.html#63e9f9fa58a2972cf3d67b6d2fd20341">rollbackTransactionForDatabase:error:</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Roll back the database transaction, returning YES on success, or NO on failure.  <a href="#63e9f9fa58a2972cf3d67b6d2fd20341"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">(BOOL)&nbsp;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_p_l_database_migration_transaction_manager-p.html#5fe57ea2b6dec565e5448f35770d444b">commitTransactionForDatabase:error:</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Commit the database transaction, returning YES on success, or NO on failure.  <a href="#5fe57ea2b6dec565e5448f35770d444b"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Manages the database migration transactions and locking to ensure atomic testing of the database version and application of any migrations. 
<p>
<dl class="user" compact><dt><b>Thread Safety</b></dt><dd><a class="el" href="protocol_p_l_database_migration_transaction_manager-p.html" title="Manages the database migration transactions and locking to ensure atomic testing...">PLDatabaseMigrationTransactionManager</a> instances are not required to implement any locking and must not be shared between threads. </dd></dl>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="c542aa6d966e309671cc0a614f4b57b7"></a><!-- doxytag: member="PLDatabaseMigrationTransactionManager&#45;p::beginExclusiveTransactionForDatabase:error:" ref="c542aa6d966e309671cc0a614f4b57b7" args="(id&lt; PLDatabase &gt; database,[error] NSError **outError)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) beginExclusiveTransactionForDatabase:           </td>
          <td></td>
          <td class="paramtype">(id&lt; <a class="el" href="protocol_p_l_database-p.html">PLDatabase</a> &gt;)&nbsp;</td>
          <td class="paramname"> <em>database</em></td>
        </tr>
        <tr>
          <td class="paramkey">error:</td>
          <td></td>
          <td class="paramtype">(NSError **)&nbsp;</td>
          <td class="paramname"> <em>outError</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Start a database transaction, using a sufficient isolation level and/or locking to ensure that no other migrations will run until this has completed. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>database</em>&nbsp;</td><td>An active database connection on which to execute any queries. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outError</em>&nbsp;</td><td>A pointer to an NSError object variable. If an error occurs, this pointer will contain an error object indicating why the transaction could not be started. If no error occurs, this parameter will be left unmodified. You may specify NULL for this parameter, and no error information will be provided. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="5fe57ea2b6dec565e5448f35770d444b"></a><!-- doxytag: member="PLDatabaseMigrationTransactionManager&#45;p::commitTransactionForDatabase:error:" ref="5fe57ea2b6dec565e5448f35770d444b" args="(id&lt; PLDatabase &gt; database,[error] NSError **outError)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) commitTransactionForDatabase:           </td>
          <td></td>
          <td class="paramtype">(id&lt; <a class="el" href="protocol_p_l_database-p.html">PLDatabase</a> &gt;)&nbsp;</td>
          <td class="paramname"> <em>database</em></td>
        </tr>
        <tr>
          <td class="paramkey">error:</td>
          <td></td>
          <td class="paramtype">(NSError **)&nbsp;</td>
          <td class="paramname"> <em>outError</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Commit the database transaction, returning YES on success, or NO on failure. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>database</em>&nbsp;</td><td>An active database connection on which to issue any queries. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outError</em>&nbsp;</td><td>A pointer to an NSError object variable. If an error occurs, this pointer will contain an error object indicating why the transaction could not be committed. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="63e9f9fa58a2972cf3d67b6d2fd20341"></a><!-- doxytag: member="PLDatabaseMigrationTransactionManager&#45;p::rollbackTransactionForDatabase:error:" ref="63e9f9fa58a2972cf3d67b6d2fd20341" args="(id&lt; PLDatabase &gt; database,[error] NSError **outError)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) rollbackTransactionForDatabase:           </td>
          <td></td>
          <td class="paramtype">(id&lt; <a class="el" href="protocol_p_l_database-p.html">PLDatabase</a> &gt;)&nbsp;</td>
          <td class="paramname"> <em>database</em></td>
        </tr>
        <tr>
          <td class="paramkey">error:</td>
          <td></td>
          <td class="paramtype">(NSError **)&nbsp;</td>
          <td class="paramname"> <em>outError</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Roll back the database transaction, returning YES on success, or NO on failure. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>database</em>&nbsp;</td><td>An active database connection on which to issue any queries. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outError</em>&nbsp;</td><td>A pointer to an NSError object variable. If an error occurs, this pointer will contain an error object indicating why the transaction could not be rolled back. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr>The documentation for this protocol was generated from the following file:<ul>
<li>Classes/<a class="el" href="_p_l_database_migration_transaction_manager_8h_source.html">PLDatabaseMigrationTransactionManager.h</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 31 19:55:28 2009 for PlausibleDatabase by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
